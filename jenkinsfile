def GIT_URL = "https://github.com/chandru143/hellocookbook.git"
def GIT_BRANCH = "master"
def REPO_NAME = "hellocookbook"

node("chefworkstation") {

   stage("Checkout SCM", {
            checkout changelog: false, poll: false,
            scm:[$class: 'GitSCM', branches: [[name: GIT_BRANCH]], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'CleanBeforeCheckout']], submoduleCfg: [], userRemoteConfigs: [[url: GIT_URL]]]
})

   stage("Rubocop Test") {
       sh """
     cd /var/lib/jenkins/workspace/
     chef exec cookstyle ${REPO_NAME}
"""
}
}
